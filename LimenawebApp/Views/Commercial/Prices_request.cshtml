@model IQueryable<LimenawebApp.Models.BI_Dim_Products>

@{
    ViewBag.Title = "Distribuidora Limeña - Prices Request";
}

<!--main content wrapper-->
<div class="content-wrapper">
    <div class="box-container">
        <div class="container-fluid">      
            <div class="row">
                <div class="col-xl-12">
                    <div class="card card-shadow mb-4">
                        <div class="card-header border-0">
                            <div class="custom-title-wrap bar-primary">
                                <div class="custom-title"></div>
                            </div>

                        </div>
                        <div class="row col-md-12">
                            <div class="col-md-4 mb-3">

                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">Bolsa $</span>
                                    </div>
                                    <input type="text" value="@ViewBag.bolsa" readonly class="form-control">

                                </div>
                            </div>

                            <div class="col-md-8">

                                <div class="col-8" style="float:right">

                                    @*<a href="#" class="btn btn-sm btn-success mb-2">Autorizaciones</a>*@

                                    <div class="input-group">


                                        <div class="input-group-prepend">
                                            <span class="input-group-text">Pedido #</span>
                                        </div>
                                        <input type="text" name="docnum" id="docnum" onkeypress='return event.charCode >= 48 && event.charCode <= 57' required class="form-control">
                                        <input type="button" onclick="buscarPedido()" id="subpedido" class="btn btn-sm btn-info" value="Buscar" />

                                    </div>


                                </div>
                            </div>
                        </div><hr />
                        <div class="custom-post-title">
                            <div class=" mt-2">

                                @foreach (var itemc in ViewBag.lstCategories)
            {
                    <button id="btn_@itemc" type="button" style="margin-top: 10px;" class="btn btn-outline-warning form-pill btnsl" onclick="filter('@itemc')">@itemc</button>
}
                                <button type="button" class="btn btn-outline-warning form-pill" style="margin-top: 10px;" onclick="filter_clear()">Clear filters</button>

                            </div><hr />
                            <div id="mainsub">
                                
                                @foreach (var itemc in ViewBag.lstCategories)
            {
                                <div class="mt-2" id="@itemc">
                                    @foreach (var itemsc in ViewBag.lstsubCategories)
    {
        if (itemsc.category == itemc)
        {
                                <button id="subbtn_@itemsc.id" type="button" style="margin-top: 10px;" class="btn btn-light form-pill subbtnsl" onclick="subfilter('@Convert.ToString(itemsc.name).Replace("'", "")')">@itemsc.name</button>
}

}
                                    <button id="subfilter" type="button" class="btn btn-light form-pill" style="margin-top: 10px;" onclick="subfilter_clear()">Clear Sub filters</button>
                                </div>}

                            </div>
                        </div>
                        <div class="card-body pt-3 pb-4">
                            <div class="table-responsive">
                                <table id="data_tableEditor" class="table table-bordered table-striped" cellspacing="0">
                                    <thead>
                                        <tr>
                                            <th>CATEGORY</th>
                                            <th>SUBCATEGORY</th>
                                            <th>BRAND</th>

                                            <th>PRODUCT</th>

                                            <th>MIN PRICE</th>


                                        </tr>
                                    </thead>
                                    <tfoot>
                                    </tfoot>
                                    <tbody>
                                        @foreach (var product in Model)
                    {
                        <tr>
                            <td>@product.category_name</td>
                            <td>@product.subcategory_name</td>
                            <td>@product.Brand_Name</td>

                            <td>@product.Product</td>

                            <td>
                                @if (product.MinPrice == null)
            {@Html.Raw("0") }
else
{@product.MinPrice.Value.ToString("0.0000")}
                        </td>
                    </tr>
}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    
</div>
